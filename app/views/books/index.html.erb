<h1>Library Books</h1>

<%= form_with url: books_path, method: :get, local: true do %>
  <div>
    <%= label_tag :query, "Search Books" %>
    <%= text_field_tag :query, params[:query], placeholder: "Enter title, author, or category" %>
    <%= submit_tag "Search" %>
  </div>
<% end %>
<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Author</th>
      <th>Category</th>
      <th>Published Date</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @books.each do |book| %>
      <tr>
        <td><%= book.title %></td>
        <td><%= book.author.name if book.author %></td>
        <td><%= book.category.name if book.category %></td>
        <td><%= book.published_date %></td>
        <td><%= link_to 'View Details', book_path(book) %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= paginate @books %>
